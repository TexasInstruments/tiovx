<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>TIOVX User Guide: TIOVX Build Instructions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ti_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TIOVX User Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('BUILD_INSTRUCTIONS.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">TIOVX Build Instructions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section user"><dt>Contents</dt><dd><ul>
<li><a class="el" href="BUILD_INSTRUCTIONS.html#BUILD_VSDK">Build instructions for Vision SDK Platform (TDA2x/3x/2Ex)</a></li>
<li><a class="el" href="BUILD_INSTRUCTIONS.html#BUILD_LINUX">Build instructions for x86 Linux Platform (HOST Emulation Mode)</a></li>
<li><a class="el" href="BUILD_INSTRUCTIONS.html#BUILD_OPTIONS">Makefile build options</a></li>
<li><a class="el" href="BUILD_INSTRUCTIONS.html#BUILD_CLEAN">Deleting all generated files</a></li>
</ul>
</dd></dl>
<p><br/>
</p>
<hr/>
<h1><a class="anchor" id="BUILD_VSDK"></a>
Build instructions for Vision SDK Platform (TDA2x/3x/2Ex)</h1>
<dl class="section user"><dt>Requirements</dt><dd><ul>
<li>Install Vision SDK vXX.XX.XX.XX as mentioned in the TIOVX release notes<ul>
<li>This will install all packages needed to build Vision SDK</li>
<li>This will also install TIOVX, VXLIB and other OpenVX related packages</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Setup</dt><dd><ul>
<li>Edit $TIOVX_PATH/vsdk_tools_path.mak, modify paths for various dependant packages if required.<ul>
<li>NOTE: When Vision SDK is installed, all paths in this file would be setup to point to correct locations within the Vision SDK installation.</li>
</ul>
</li>
<li>For windows build environment,<ul>
<li>Make sure "xdctools_x_xx_xx_xx_core/bin/gmake" available as part of XDC package (included in Vision SDK) is visible in the system path.</li>
</ul>
</li>
<li>Edit $TIOVX_PATH/Makefile<ul>
<li>set BUILD_EMULATION_MODE=no and BUILD_TARGET_MODE=yes</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Build</dt><dd><ul>
<li>Open a command prompt at $TIOVX_PATH</li>
<li>Type below commands to build TIOVX and associated libraries, On Linux, <div class="fragment"><div class="line">make</div>
</div><!-- fragment --> On Windows, <div class="fragment"><div class="line">gmake</div>
</div><!-- fragment --><ul>
<li>This builds the TIOVX libraries and copies the libraries to $TIOVX_PATH/lib folder</li>
<li>Conformance test and tutorial is built as a library</li>
</ul>
</li>
<li>The final Vision SDK executable with the OpenVX conformance test, tutorial needs to be build from Vision SDK folder</li>
<li>Steps to build Vision SDK, (OpenVX is enabled by default in Vision SDK)<ul>
<li>In vision_sdk/build/Rules.make<ul>
<li>set MAKECONFIG to one of below based on yor SoC/EVM<ul>
<li>set MAKECONFIG=tda2xx_evm_bios_all # For TDA2x BIOS ONLY</li>
<li>set MAKECONFIG=tda2ex_evm_bios_all # For TDA2Ex BIOS ONLY</li>
<li>set MAKECONFIG=tda3xx_evm_bios_all # For TDA3x BIOS ONLY</li>
<li>set MAKECONFIG=tda2xx_evm_linux_all # For TDA2x Linux+BIOS</li>
<li>set MAKECONFIG=tda2ex_evm_linux_all # For TDA2Ex Linux+BIOS</li>
</ul>
</li>
<li>set PROFILE to one of below<ul>
<li>debug</li>
<li>release [default]</li>
</ul>
</li>
</ul>
</li>
<li>Build Vision SDK and bootloader by following steps in appropiate SoC/EVM User Guide in Vision SDK<ul>
<li>Typical Vision SDK build steps are (refer user guide for details) <div class="fragment"><div class="line">make linux         # <span class="keywordflow">for</span> LINUX+BIOS config, build linux kernel, uboot, kernel modules</div>
<div class="line">make linux_install # <span class="keywordflow">for</span> LINUX+BIOS config, install kernel modules <a class="code" href="tiovx__performance__TDA2Ex__BIOS_8html.html#abbc43ef69f541dca5e2ca497cfdaeb9f">to</a> linux filesystem</div>
<div class="line">make -s -j depend  # build drivers and other dependancies</div>
<div class="line">make -s -j         # build Vision SDK application binary</div>
<div class="line">make -s sbl        # <span class="keywordflow">for</span> BIOS config only, build SBL (secondary bootloader)</div>
<div class="line">make -s appimage   # <span class="keywordflow">for</span> BIOS config only, make SBL bootable application binary</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>When Vision SDK is built, it will link against the tiovx related libraries</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Running the conformance test and tutorial (for BIOS ONLY config)</dt><dd><ul>
<li>Flash/copy the Vision SDK bootloader, "AppImage" and setup the EVM as mentioned in SoC/EVM User Guide in Vision SDK</li>
<li>Copy the test data used in conformance test to an SD card<ul>
<li>Copy all files and folders from "$TIOVX_PATH\conformance_tests\test_data" to "test_data" folder in SD card</li>
</ul>
</li>
<li>Boot the EVM, with the SD card inserted and use the menu in UART terminal to navigate to the OpenVX use-cases and run the conformance test, tutorial</li>
<li>NOTE: Output .bmp files generated by the tutorial will be present in SD card in the folder "test_data"</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Running the Camera+Display with OpenVX use-case (for BIOS ONLY config)</dt><dd><ul>
<li>Flash/copy the Vision SDK bootloader, "AppImage" and setup the EVM as mentioned in SoC/EVM User Guide in Vision SDK</li>
<li>Connect a OV10635 sensor to the EVM as mentioned in SoC/EVM User Guide in Vision SDK</li>
<li>Connect a HDMI Display to the EVM as mentioned in SoC/EVM User Guide in Vision SDK</li>
<li>Boot the EVM, with the SD card inserted and use the menu in UART terminal to navigate to the OpenVX use-cases and run the "VIP Single Channel Capture + OpenVX + Display" option</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Running the conformance test and tutorial (for LINUX+BIOS config)</dt><dd><ul>
<li>Copy all files and folders from "$TIOVX_PATH\conformance_tests\test_data" to Linux filesystem at "/opt/openvx/test_data"</li>
<li>Do the below steps as mentioned in Vision SDK user guide<ul>
<li>Flash the linux kernel, uboot, filesystem to SD card</li>
<li>Boot the EVM</li>
<li>At the linux command prompt set path of test data as shown below<ul>
<li>export VX_TEST_DATA_PATH=/opt/openvx/test_data</li>
</ul>
</li>
<li>Run the Vision SDK demo application</li>
</ul>
</li>
<li>Use the menu in UART terminal to navigate to the OpenVX use-cases and run the conformance test, tutorial</li>
<li>NOTE: Output .bmp files generated by the tutorial will be present in filesystem in the folder $VX_TEST_DATA_PATH</li>
</ul>
</dd></dl>
<p><br/>
</p>
<hr/>
<h1><a class="anchor" id="BUILD_LINUX"></a>
Build instructions for x86 Linux Platform (HOST Emulation Mode)</h1>
<dl class="section user"><dt>Requirements</dt><dd><ul>
<li>GCC and Linux<ul>
<li>Currently the build is tested with Ubuntu 14.04</li>
<li>Make sure GCC v4.8.4 or higer is installed and visible in your system path</li>
<li>Make sure GNU make is installed and visible in your system path</li>
<li>GCC compiler with 32b mode support is required for using TIOVX<ul>
<li>Make sure below linux packages are installed. This is requiered to use GCC in 32b mode on 64b systems. <div class="fragment"><div class="line">sudo apt-<span class="keyword">get</span> install g++-multilib libc6 libc6-dev</div>
</div><!-- fragment --></li>
</ul>
</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Setup</dt><dd><ul>
<li>Edit $TIOVX_PATH/vsdk_tools_path.mak<ul>
<li>Modify "GCC_LINUX_ROOT := /usr/" to match your environment if needed</li>
<li>The following paths are the only paths that must be set correctly for host emulation mode. (If paths have been already set for build for Vision SDK Platform, they do not need to be changed.)<ul>
<li>VXLIB_PATH</li>
<li>DMAUTILS_PATH (must only be set if BUILD_BAM option is enabled)</li>
<li>ALGFRAMEWORK_PATH (must only be set if BUILD_BAM option is enabled)</li>
<li>EVE_SW_PATH (must only be set if BUILD_IVISION_KERNELS is enabled)</li>
</ul>
</li>
</ul>
</li>
<li>Edit $TIOVX_PATH/Makefile<ul>
<li>set BUILD_EMULATION_MODE=yes and BUILD_TARGET_MODE=no</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Build</dt><dd><ul>
<li>Open a command prompt at $TIOVX_PATH</li>
<li>Type "make" to build TIOVX and associated libraries<ul>
<li>This builds the TIOVX libraries and conformance test, tutorial executables</li>
<li>This uses pre-built library for VXLIB, DMAUtils, Algframework from "$TIOVX_PATH\lib\PC\X86\LINUX\$PROFILE\*.a"</li>
<li>The pre-built libraries are compiled in 32bit x86 host emulation mode</li>
</ul>
</li>
<li>Conformance test, tutorial executable is output at<ul>
<li>"$TIOVX_PATH\out\PC\X86\LINUX\debug\vx_conformance_tests_exe"</li>
<li>"$TIOVX_PATH\out\PC\X86\LINUX\debug\vx_tutorial_exe"</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Running the conformance test and tutorial</dt><dd><ul>
<li>Open a command prompt at the folder "$TIOVX_PATH/out/PC/X86/LINUX/$PROFILE/"</li>
<li>Set environment variable below to specify the path of the test data. This is used by both the conformance test and tutorial executables <div class="fragment"><div class="line">export VX_TEST_DATA_PATH=../../../../../conformance_tests/test_data</div>
</div><!-- fragment --></li>
<li>Execute "./vx_conformance_tests_exe" to run the conformance test</li>
<li>Execute "./vx_tutorial_exe" to run the tutorial</li>
<li>NOTE: Output .bmp files generated by the tutorial will be present in the folder $VX_TEST_DATA_PATH</li>
</ul>
</dd></dl>
<p><br/>
</p>
<hr/>
<h1><a class="anchor" id="BUILD_OPTIONS"></a>
Makefile build options</h1>
<dl class="section user"><dt>Build Options</dt><dd></dd></dl>
<table  frame="box" rules="all" cellspacing="0" width="50%" border="1" cellpadding="3">
<tr bgcolor="lightgrey">
<th>Build Option  </th><th>Description  </th><th>Default Setting   </th></tr>
<tr>
<td>BUILD_EMULATION_MODE  </td><td>Builds PC emulation mode  </td><td>no   </td></tr>
<tr>
<td>BUILD_TARGET_MODE  </td><td>Builds for target SoC platform like TDAxx  </td><td>yes   </td></tr>
<tr>
<td>BUILD_CONFORMANCE_TEST  </td><td>Builds entire test suite executable  </td><td>yes   </td></tr>
<tr>
<td>BUILD_IVISION_KERNELS  </td><td>Builds iVision kernels (EVE_SW_PATH required to be set for this build)  </td><td>yes   </td></tr>
<tr>
<td>BUILD_BAM  </td><td>Builds DMA wrapper (DMAUTILS_PATH and ALGFRAMEWORK_PATH required to be set for this build)  </td><td>yes   </td></tr>
<tr>
<td>BUILD_TUTORIAL  </td><td>Builds OpenVX tutorial  </td><td>yes   </td></tr>
<tr>
<td>BUILD_LINUX_A15  </td><td>Builds for A15 Linux target  </td><td>yes   </td></tr>
<tr>
<td>BUILD_EVE  </td><td>Builds for EVE platform (ARP32CGT_ROOT and EVE_SW_PATH required to be set for this build)  </td><td>yes   </td></tr>
<tr>
<td>BUILD_SDK  </td><td>Builds for Vision SDK SW platform (TDA2x/3x/2Ex) or Processor SDK SW platform (AM57xx). <br/>
 Valid values are, <br/>
 vsdk for Vision SDK SW platform <br/>
 psdk for Processor SDK SW platform  </td><td>vsdk   </td></tr>
</table>
<p><br/>
</p>
<hr/>
<h1><a class="anchor" id="BUILD_CLEAN"></a>
Deleting all generated files</h1>
<ul>
<li>To do a clean build, do "(g)make clean"</li>
<li>To manually delete generated files do below <div class="fragment"><div class="line">Delete directory out/</div>
</div><!-- fragment --> </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
