<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>TIOVX Tutorials: vx_tutorial_image_load_save.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ti_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TIOVX Tutorials
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('vx__tutorial__image__load__save_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">vx_tutorial_image_load_save.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;VX/vx.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="bmp__rd__wr_8h_source.html">bmp_rd_wr.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="utility_8h_source.html">utility.h</a>&gt;</code><br/>
</div>
<p><a href="vx__tutorial__image__load__save_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8118656bb5a60090a1dbffa402168438"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vx__tutorial__image__load__save_8c.html#a8118656bb5a60090a1dbffa402168438">IN_FILE_NAME</a>&#160;&#160;&#160;&quot;colors.bmp&quot;</td></tr>
<tr class="memdesc:a8118656bb5a60090a1dbffa402168438"><td class="mdescLeft">&#160;</td><td class="mdescRight">Input file name.  <a href="#a8118656bb5a60090a1dbffa402168438">More...</a><br/></td></tr>
<tr class="separator:a8118656bb5a60090a1dbffa402168438"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75506823f0db0ef3f4f022cf132dbbbb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vx__tutorial__image__load__save_8c.html#a75506823f0db0ef3f4f022cf132dbbbb">OUT_FILE_NAME</a>&#160;&#160;&#160;&quot;vx_tutorial_image_load_save_out.bmp&quot;</td></tr>
<tr class="memdesc:a75506823f0db0ef3f4f022cf132dbbbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output file name.  <a href="#a75506823f0db0ef3f4f022cf132dbbbb">More...</a><br/></td></tr>
<tr class="separator:a75506823f0db0ef3f4f022cf132dbbbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9de340eb905bd0b735ec6f0471314c85"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vx__tutorial__image__load__save_8c.html#a9de340eb905bd0b735ec6f0471314c85">vx_tutorial_image_load_save</a> ()</td></tr>
<tr class="memdesc:a9de340eb905bd0b735ec6f0471314c85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tutorial Entry Point.  <a href="#a9de340eb905bd0b735ec6f0471314c85">More...</a><br/></td></tr>
<tr class="separator:a9de340eb905bd0b735ec6f0471314c85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8e9cbbd49ab0dec7850267224548cd6"><td class="memItemLeft" align="right" valign="top">vx_image&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vx__tutorial__image__load__save_8c.html#af8e9cbbd49ab0dec7850267224548cd6">create_image_from_file</a> (vx_context context, char *filename, vx_bool convert_to_gray_scale)</td></tr>
<tr class="memdesc:af8e9cbbd49ab0dec7850267224548cd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a image data object given BMP filename as input.  <a href="#af8e9cbbd49ab0dec7850267224548cd6">More...</a><br/></td></tr>
<tr class="separator:af8e9cbbd49ab0dec7850267224548cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ffb77a8e510c0236b07306d0eb47a30"><td class="memItemLeft" align="right" valign="top">vx_status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vx__tutorial__image__load__save_8c.html#a2ffb77a8e510c0236b07306d0eb47a30">save_image_to_file</a> (char *filename, vx_image image)</td></tr>
<tr class="memdesc:a2ffb77a8e510c0236b07306d0eb47a30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save data from image object to BMP file.  <a href="#a2ffb77a8e510c0236b07306d0eb47a30">More...</a><br/></td></tr>
<tr class="separator:a2ffb77a8e510c0236b07306d0eb47a30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb1f44b0f70eb1480ce3ed7dc7bf4e62"><td class="memItemLeft" align="right" valign="top">vx_status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vx__tutorial__image__load__save_8c.html#abb1f44b0f70eb1480ce3ed7dc7bf4e62">load_image_from_file</a> (vx_image image, char *filename, vx_bool convert_to_gray_scale)</td></tr>
<tr class="memdesc:abb1f44b0f70eb1480ce3ed7dc7bf4e62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load data from BMP file into a previously created vx_image object.  <a href="#abb1f44b0f70eb1480ce3ed7dc7bf4e62">More...</a><br/></td></tr>
<tr class="separator:abb1f44b0f70eb1480ce3ed7dc7bf4e62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b121b6033d987d0cba3eb000a1cb547"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vx__tutorial__image__load__save_8c.html#a5b121b6033d987d0cba3eb000a1cb547">ascii_file_read</a> (char *filename, int num_elements, void *buffer, vx_enum data_type)</td></tr>
<tr class="separator:a5b121b6033d987d0cba3eb000a1cb547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d865220a3f3c161f6b7a1ad76b7699f"><td class="memItemLeft" align="right" valign="top">vx_matrix&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vx__tutorial__image__load__save_8c.html#a1d865220a3f3c161f6b7a1ad76b7699f">create_matrix_from_file</a> (vx_context context, vx_enum data_type, int cols, int rows, char *filename)</td></tr>
<tr class="separator:a1d865220a3f3c161f6b7a1ad76b7699f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acef941b9272be4ae8e9d980e334b72d9"><td class="memItemLeft" align="right" valign="top">vx_status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vx__tutorial__image__load__save_8c.html#acef941b9272be4ae8e9d980e334b72d9">save_pyramid_to_file</a> (char *filename, vx_pyramid pyr, vx_size levels)</td></tr>
<tr class="separator:acef941b9272be4ae8e9d980e334b72d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Load and save data from OpenVX image objects</p>
<p>In this tutorial we learn the below concepts,</p>
<ul>
<li>How to create OpenVX context and OpenVX image data object</li>
<li>How to read a BMP file and load the pixel values into the image data object</li>
<li>How to query the image data object for attributes like width, height</li>
<li>How to read pixel values from an image data object and save it as a BMP file</li>
<li>How to cleanup all created resources and exit the OpenVX application</li>
</ul>
<p>To include OpenVX interfaces include below file </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;VX/vx.h&gt;</span></div>
</div><!-- fragment --><p>To include utility APIs to read and write BMP file include below file </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="bmp__rd__wr_8h.html">bmp_rd_wr.h</a>&gt;</span></div>
</div><!-- fragment --><p>Follow the comments in the function <a class="el" href="vx__tutorial__image__load__save_8c.html#a9de340eb905bd0b735ec6f0471314c85" title="Tutorial Entry Point. ">vx_tutorial_image_load_save()</a> to understand this tutorial</p>
<p>As part of this tutorial, we create few utility functions as listed below. These functions will be used in subsequent tutorials to load and save images. </p>
<table  frame="box" rules="all" cellspacing="0" width="50%" border="1" cellpadding="3">
<tr bgcolor="lightgrey">
<th>Utility function  </th><th>Description   </th></tr>
<tr>
<td><a class="el" href="vx__tutorial__image__load__save_8c.html#af8e9cbbd49ab0dec7850267224548cd6" title="Create a image data object given BMP filename as input. ">create_image_from_file()</a>  </td><td>Reads a .bmp file and create a vx_image object with pixel values read from the BMP file   </td></tr>
<tr>
<td><a class="el" href="vx__tutorial__image__load__save_8c.html#a2ffb77a8e510c0236b07306d0eb47a30" title="Save data from image object to BMP file. ">save_image_to_file()</a>  </td><td>Given a vx_image object, creates a BMP file with pixel values from the vx_image object  </td></tr>
<tr>
<td><a class="el" href="vx__tutorial__image__load__save_8c.html#abb1f44b0f70eb1480ce3ed7dc7bf4e62" title="Load data from BMP file into a previously created vx_image object. ">load_image_from_file()</a>  </td><td>Same as <a class="el" href="vx__tutorial__image__load__save_8c.html#af8e9cbbd49ab0dec7850267224548cd6" title="Create a image data object given BMP filename as input. ">create_image_from_file()</a>, only a created vx_image object is passed to this function. <b>NOTE:</b> This function though listed in this tutorial is used in later tutorials   </td></tr>
</table>

<p>Definition in file <a class="el" href="vx__tutorial__image__load__save_8c_source.html">vx_tutorial_image_load_save.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a8118656bb5a60090a1dbffa402168438"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IN_FILE_NAME&#160;&#160;&#160;&quot;colors.bmp&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Input file name. </p>

<p>Definition at line <a class="el" href="vx__tutorial__image__load__save_8c_source.html#l00126">126</a> of file <a class="el" href="vx__tutorial__image__load__save_8c_source.html">vx_tutorial_image_load_save.c</a>.</p>

</div>
</div>
<a class="anchor" id="a75506823f0db0ef3f4f022cf132dbbbb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OUT_FILE_NAME&#160;&#160;&#160;&quot;vx_tutorial_image_load_save_out.bmp&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Output file name. </p>

<p>Definition at line <a class="el" href="vx__tutorial__image__load__save_8c_source.html#l00129">129</a> of file <a class="el" href="vx__tutorial__image__load__save_8c_source.html">vx_tutorial_image_load_save.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a9de340eb905bd0b735ec6f0471314c85"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vx_tutorial_image_load_save </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tutorial Entry Point. </p>
<ul>
<li>Define objects that we wish to create in the OpenVX application.</li>
</ul>
<p>A vx_context object is defined which is used as input parameter for all subesquent OpenVX object create APIs </p>
<div class="fragment"><div class="line">  /</div>
<div class="line">vx_context context;</div>
<div class="line">vx_image image;</div>
</div><!-- fragment --><ul>
<li>Create OpenVX context.</li>
</ul>
<p>This MUST be done first before any OpenVX API call. The context that is returned is used as input for subsequent OpenVX APIs </p>
<div class="fragment"><div class="line">  /</div>
<div class="line">context = vxCreateContext();</div>
</div><!-- fragment --><ul>
<li>Create image object.</li>
</ul>
<p>Follow the comments in <a class="el" href="vx__tutorial__image__load__save_8c.html#af8e9cbbd49ab0dec7850267224548cd6" title="Create a image data object given BMP filename as input. ">create_image_from_file()</a> to see how a vx_image object is created and filled with RGB data from BMP file <a class="el" href="vx__tutorial__graph__user__kernel__pytiovx_8c.html#a8118656bb5a60090a1dbffa402168438">IN_FILE_NAME</a> </p>
<div class="fragment"><div class="line">  /</div>
<div class="line">image = <a class="code" href="utility_8h.html#af8e9cbbd49ab0dec7850267224548cd6">create_image_from_file</a>(context, <a class="code" href="vx__tutorial__image__load__save_8c.html#a8118656bb5a60090a1dbffa402168438">IN_FILE_NAME</a>, vx_false_e);</div>
</div><!-- fragment --><ul>
<li>Query image object.</li>
</ul>
<p>Here we print the image dimensions. </p>
<div class="fragment"><div class="line">  /</div>
<div class="line">vxQueryImage(image, VX_IMAGE_WIDTH, &amp;width, <span class="keyword">sizeof</span>(vx_uint32));</div>
<div class="line">vxQueryImage(image, VX_IMAGE_HEIGHT, &amp;height, <span class="keyword">sizeof</span>(vx_uint32));</div>
</div><!-- fragment --><ul>
<li>Save image object to bitmap file <a class="el" href="vx__tutorial__image__histogram_8c.html#a75506823f0db0ef3f4f022cf132dbbbb">OUT_FILE_NAME</a>.</li>
</ul>
<p>Follow the comments in <a class="el" href="vx__tutorial__image__load__save_8c.html#a2ffb77a8e510c0236b07306d0eb47a30" title="Save data from image object to BMP file. ">save_image_to_file()</a> to see how data in vx_image object is accessed to store pixel values from the image object to BMP file <a class="el" href="vx__tutorial__image__histogram_8c.html#a75506823f0db0ef3f4f022cf132dbbbb">OUT_FILE_NAME</a> </p>
<div class="fragment"><div class="line">  /</div>
<div class="line"><a class="code" href="utility_8h.html#a2ffb77a8e510c0236b07306d0eb47a30">save_image_to_file</a>(<a class="code" href="vx__tutorial__image__load__save_8c.html#a75506823f0db0ef3f4f022cf132dbbbb">OUT_FILE_NAME</a>, image);</div>
</div><!-- fragment --><ul>
<li>Release image object.</li>
</ul>
<p>Since we are done with using this image object, release it </p>
<div class="fragment"><div class="line">  /</div>
<div class="line">vxReleaseImage(&amp;image);</div>
</div><!-- fragment --><ul>
<li>Release context object.</li>
</ul>
<p>Since we are done using OpenVX context, release it. No further OpenVX API calls should be done, until a context is again created using vxCreateContext() </p>
<div class="fragment"><div class="line">  /</div>
<div class="line">vxReleaseContext(&amp;context);</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="vx__tutorial__image__load__save_8c_source.html#l00134">134</a> of file <a class="el" href="vx__tutorial__image__load__save_8c_source.html">vx_tutorial_image_load_save.c</a>.</p>

</div>
</div>
<a class="anchor" id="af8e9cbbd49ab0dec7850267224548cd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vx_image create_image_from_file </td>
          <td>(</td>
          <td class="paramtype">vx_context&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vx_bool&#160;</td>
          <td class="paramname"><em>convert_to_gray_scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a image data object given BMP filename as input. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>[in] OpenVX context within which the image object will get created </td></tr>
    <tr><td class="paramname">filename</td><td>[in] BMP filename, MUST have extension of .bmp </td></tr>
    <tr><td class="paramname">convert_to_gray_scale</td><td>[in] vx_true_e: Converts RGB values in BMP file to 8b grayscale value and copies them to image object<br/>
 vx_false_e: Retains RGB values from BMP file and copies them to image object<br/>
 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Image data object. <br/>
 Image data format is VX_DF_IMAGE_RGB when 'convert_to_gray_scale' is vx_false_e <br/>
 Image data format is VX_DF_IMAGE_U8 when 'convert_to_gray_scale' is vx_true_e </dd></dl>
<ul>
<li>Read BMP file.</li>
</ul>
<p>The BMP file pixel values are stored at location 'data_ptr'. The BMP file attributes are returned in variables 'width', 'heigth', 'df' (data format). 'bmp_file_context' holds the context of the BMP file which is free'ed after copying the pixel values from 'data_ptr' into a vx_image object. </p>
<div class="fragment"><div class="line">  /</div>
<div class="line"><span class="preprocessor">#ifdef SKIP_FILEIO</span></div>
<div class="line"><span class="preprocessor"></span>status = 0;</div>
<div class="line">width = 640;</div>
<div class="line">height = 480;</div>
<div class="line">stride = 640;</div>
<div class="line"><span class="keywordflow">if</span>(convert_to_gray_scale)        </div>
<div class="line">    df = VX_DF_IMAGE_U8;</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">    df = VX_DF_IMAGE_RGB;</div>
<div class="line">data_ptr = NULL;</div>
<div class="line">bmp_file_context = NULL;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>status = <a class="code" href="bmp__rd__wr_8h.html#a9fd09ad0e348951c4af9dbb4c852cfd5">bmp_file_read</a>(</div>
<div class="line">            filename,</div>
<div class="line">            convert_to_gray_scale,</div>
<div class="line">            &amp;width, &amp;height, &amp;stride, &amp;df, &amp;data_ptr,</div>
<div class="line">            &amp;bmp_file_context);</div>
</div><!-- fragment --><ul>
<li>Create OpenVX image object.</li>
</ul>
<p>Creates a OpenVX image object of 'width' x 'height' and having data format 'df'.</p>
<p><b>TIP:</b> In OpenVX whenever an object is created use vxGetStatus() to find if the object creation was successful. The object must be typecasted to vx_reference type when calling vxGetStatus() API. If the reference is valid VX_SUCCESS should be returned by vxGetStatus(). </p>
<div class="fragment"><div class="line">  /</div>
<div class="line">image = vxCreateImage(context, width, height, df);</div>
<div class="line">status = vxGetStatus((vx_reference)image);</div>
</div><!-- fragment --><ul>
<li>Copy pixel values from 'data_ptr' into image object.</li>
</ul>
<p>'image_addr' is used to describe arrangement of data within 'data_ptr'. The attributes 'wdith','height','stride' are used to set 'dim_x', 'dim_y', 'stride_y' fields in 'image_addr'. 'stride_x' is derived from data format 'df'. Other fields are set to unity.</p>
<p>'rect' is used to select ROI within 'data_ptr' from which data is to be copied to image object. Here 'rect' is set to copy all the pixels from 'data_ptr' into the image object.</p>
<p>'VX_WRITE_ONLY' indicates that application wants to write into the vx_image object.</p>
<p>'VX_MEMORY_TYPE_HOST' indicates the type of memory that is pointed to by 'data_ptr'. Use 'VX_MEMORY_TYPE_HOST' for TIVX applications. </p>
<div class="fragment"><div class="line">  /</div>
<div class="line"></div>
<div class="line">vx_imagepatch_addressing_t image_addr;</div>
<div class="line">vx_rectangle_t rect;</div>
<div class="line">uint32_t bpp;</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">if</span>( df == VX_DF_IMAGE_U8 )</div>
<div class="line">    bpp = 1;</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line"><span class="keywordflow">if</span>( df == VX_DF_IMAGE_RGB )</div>
<div class="line">    bpp = 3;</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line"><span class="keywordflow">if</span>( df == VX_DF_IMAGE_RGBX )</div>
<div class="line">    bpp = 4;</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">    bpp = 1; <span class="comment">/* it should not reach here for BMP files */</span></div>
<div class="line"></div>
<div class="line">image_addr.dim_x = width;</div>
<div class="line">image_addr.dim_y = height;</div>
<div class="line">image_addr.stride_x = bpp;</div>
<div class="line">image_addr.stride_y = stride;</div>
<div class="line">image_addr.scale_x = VX_SCALE_UNITY;</div>
<div class="line">image_addr.scale_y = VX_SCALE_UNITY;</div>
<div class="line">image_addr.step_x = 1;</div>
<div class="line">image_addr.step_y = 1;</div>
<div class="line"></div>
<div class="line">rect.start_x = 0;</div>
<div class="line">rect.start_y = 0;</div>
<div class="line">rect.end_x = width;</div>
<div class="line">rect.end_y = height;</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">if</span>(data_ptr!=NULL)</div>
<div class="line">{</div>
<div class="line">    vxCopyImagePatch(image,</div>
<div class="line">        &amp;rect,</div>
<div class="line">        0,</div>
<div class="line">        &amp;image_addr,</div>
<div class="line">        data_ptr,</div>
<div class="line">        VX_WRITE_ONLY,</div>
<div class="line">        VX_MEMORY_TYPE_HOST</div>
<div class="line">        );</div>
<div class="line">}</div>
</div><!-- fragment --> <pre class="fragment">- Release BMP file context.

Since pixel values are copied from 'data_ptr' to vx_image object
Now 'data_ptr' and any other resources allocted by bmp_file_read()
are free'ed by calling bmp_file_read_release()
</pre> <div class="fragment"><div class="line">  /</div>
<div class="line"><a class="code" href="bmp__rd__wr_8h.html#a2a612b23e595a4ac11ba207c88c03be6">bmp_file_read_release</a>(bmp_file_context);</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="vx__tutorial__image__load__save_8c_source.html#l00233">233</a> of file <a class="el" href="vx__tutorial__image__load__save_8c_source.html">vx_tutorial_image_load_save.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2ffb77a8e510c0236b07306d0eb47a30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vx_status save_image_to_file </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vx_image&#160;</td>
          <td class="paramname"><em>image</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save data from image object to BMP file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>[in] BMP filename, MUST have extension of .bmp </td></tr>
    <tr><td class="paramname">image</td><td>[in] Image data object. Image data format MUST be VX_DF_IMAGE_RGB or VX_DF_IMAGE_U8</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>VX_SUCCESS if BMP could be created and saved with data from image object </dd></dl>
<ul>
<li>Check if image object is valid</li>
</ul>
<div class="fragment"><div class="line">  /</div>
<div class="line">status = vxGetStatus((vx_reference)image);</div>
</div><!-- fragment --> <pre class="fragment">- Query image attributes.

These will be used to select ROI of data to be copied and
and to set attributes of the BMP file
</pre> <div class="fragment"><div class="line">  /</div>
<div class="line"></div>
<div class="line">vxQueryImage(image, VX_IMAGE_WIDTH, &amp;width, <span class="keyword">sizeof</span>(vx_uint32));</div>
<div class="line">vxQueryImage(image, VX_IMAGE_HEIGHT, &amp;height, <span class="keyword">sizeof</span>(vx_uint32));</div>
<div class="line">vxQueryImage(image, VX_IMAGE_FORMAT, &amp;df, <span class="keyword">sizeof</span>(vx_df_image));</div>
</div><!-- fragment --> <pre class="fragment">- Map image data to user accessible memory space
</pre><p>'image_addr' describes the arrangement of the mapped image data. <br/>
 'data_ptr' points to the first pixel of the mapped image data. <br/>
 'map_id' holds the mapped context. This is used to unmapped the data once application is done with it. <br/>
 'VX_READ_ONLY' indicates that application will read from the mapped memory. <br/>
 'rect' holds the ROI of image object to map. In this example, 'rect' is set to map the whole image.</p>
<div class="fragment"><div class="line">  /</div>
<div class="line">rect.start_x = 0;</div>
<div class="line">rect.start_y = 0;</div>
<div class="line">rect.end_x = width;</div>
<div class="line">rect.end_y = height;</div>
<div class="line"></div>
<div class="line">status = vxMapImagePatch(image,</div>
<div class="line">    &amp;rect,</div>
<div class="line">    0,</div>
<div class="line">    &amp;map_id,</div>
<div class="line">    &amp;image_addr,</div>
<div class="line">    &amp;data_ptr,</div>
<div class="line">    VX_READ_ONLY,</div>
<div class="line">    VX_MEMORY_TYPE_HOST,</div>
<div class="line">    VX_NOGAP_X</div>
<div class="line">    );</div>
</div><!-- fragment --> <pre class="fragment">- Write to BMP file using utility API
</pre><p>'image_addr.stride_y' is used to specify the offset in bytes between two consecutive lines in memory. This is returned by vxMapImagePatch() above </p>
<div class="fragment"><div class="line">  /</div>
<div class="line"><span class="preprocessor">#ifdef SKIP_FILEIO</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="bmp__rd__wr_8h.html#a34dec5bef3b7ecc629d59645b1c6306e">bmp_file_write</a>(filename, width, height, image_addr.stride_y, df, data_ptr);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --> <pre class="fragment">- Unmapped a previously mapped image object
</pre><p>Every vxMapImagePatch MUST have a corresponding unmap in OpenVX. The 'map_id' returned by vxMapImagePatch() is used as input by vxUnmapImagePatch() </p>
<div class="fragment"><div class="line">  /</div>
<div class="line">vxUnmapImagePatch(image, map_id);</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="vx__tutorial__image__load__save_8c_source.html#l00376">376</a> of file <a class="el" href="vx__tutorial__image__load__save_8c_source.html">vx_tutorial_image_load_save.c</a>.</p>

</div>
</div>
<a class="anchor" id="abb1f44b0f70eb1480ce3ed7dc7bf4e62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vx_status load_image_from_file </td>
          <td>(</td>
          <td class="paramtype">vx_image&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vx_bool&#160;</td>
          <td class="paramname"><em>convert_to_gray_scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load data from BMP file into a previously created vx_image object. </p>
<p>This function is same as <a class="el" href="vx__tutorial__image__load__save_8c.html#af8e9cbbd49ab0dec7850267224548cd6" title="Create a image data object given BMP filename as input. ">create_image_from_file()</a>. Only difference is that the vx_image object is created outside this function. Some tutorials use this function instead of <a class="el" href="vx__tutorial__image__load__save_8c.html#af8e9cbbd49ab0dec7850267224548cd6" title="Create a image data object given BMP filename as input. ">create_image_from_file()</a></p>
<p>This function queries the vx_image object to make sure its attributes match the attributes of the BMP file from which data needs to be loaded into the image object. In case of mismatch data is not loaded and error is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>[in] Previouly created image object </td></tr>
    <tr><td class="paramname">filename</td><td>[in] BMP filename, MUST have extension of .bmp </td></tr>
    <tr><td class="paramname">convert_to_gray_scale</td><td>[in] vx_true_e: Converts RGB values in BMP file to 8b grayscale value and copies them to image object<br/>
 vx_false_e: Retains RGB values from BMP file and copies them to image object<br/>
 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>VX_SUCCESS if BMP file data could be loaded into the vx_image object. </dd></dl>

<p>Definition at line <a class="el" href="vx__tutorial__image__load__save_8c_source.html#l00481">481</a> of file <a class="el" href="vx__tutorial__image__load__save_8c_source.html">vx_tutorial_image_load_save.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5b121b6033d987d0cba3eb000a1cb547"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ascii_file_read </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_elements</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vx_enum&#160;</td>
          <td class="paramname"><em>data_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="vx__tutorial__image__load__save_8c_source.html#l00570">570</a> of file <a class="el" href="vx__tutorial__image__load__save_8c_source.html">vx_tutorial_image_load_save.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1d865220a3f3c161f6b7a1ad76b7699f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vx_matrix create_matrix_from_file </td>
          <td>(</td>
          <td class="paramtype">vx_context&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vx_enum&#160;</td>
          <td class="paramname"><em>data_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cols</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="vx__tutorial__image__load__save_8c_source.html#l00639">639</a> of file <a class="el" href="vx__tutorial__image__load__save_8c_source.html">vx_tutorial_image_load_save.c</a>.</p>

</div>
</div>
<a class="anchor" id="acef941b9272be4ae8e9d980e334b72d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vx_status save_pyramid_to_file </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vx_pyramid&#160;</td>
          <td class="paramname"><em>pyr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vx_size&#160;</td>
          <td class="paramname"><em>levels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="vx__tutorial__image__load__save_8c_source.html#l00655">655</a> of file <a class="el" href="vx__tutorial__image__load__save_8c_source.html">vx_tutorial_image_load_save.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_07c2df013bb20677b8e65a9f18968d2c.html">tutorial</a></li><li class="navelem"><a class="el" href="dir_dc1afd1a1caa99ffa4038f215ce6b609.html">ch02_image</a></li><li class="navelem"><a class="el" href="vx__tutorial__image__load__save_8c.html">vx_tutorial_image_load_save.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
